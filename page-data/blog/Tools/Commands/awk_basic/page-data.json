{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/Tools/Commands/awk_basic/",
    "result": {"data":{"site":{"siteMetadata":{"title":"おっさんWEBエンジニア奮闘記"}},"markdownRemark":{"id":"92f3f27f-ec7a-5491-95b1-bc6752e4409b","excerpt":"Variable mark mean $0 行全部 ${n} n 列目 NR 行数 NF 桁数 FNR 処理行 NR%{n}=={} スキップ Option option mean -f ファイル指定 -F デリミタ ’,’ ’ ’ -v 変数 ‘key=val’ File を指定して実行 File…","html":"<h2>Variable</h2>\n<table>\n<thead>\n<tr>\n<th>mark</th>\n<th>mean</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>$0</td>\n<td>行全部</td>\n</tr>\n<tr>\n<td>${n}</td>\n<td>n 列目</td>\n</tr>\n<tr>\n<td>NR</td>\n<td>行数</td>\n</tr>\n<tr>\n<td>NF</td>\n<td>桁数</td>\n</tr>\n<tr>\n<td>FNR</td>\n<td>処理行</td>\n</tr>\n<tr>\n<td>NR%{n}=={}</td>\n<td>スキップ</td>\n</tr>\n</tbody>\n</table>\n<h2>Option</h2>\n<table>\n<thead>\n<tr>\n<th>option</th>\n<th>mean</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-f</td>\n<td>ファイル指定</td>\n</tr>\n<tr>\n<td>-F</td>\n<td>デリミタ ’,’ ’ ’</td>\n</tr>\n<tr>\n<td>-v</td>\n<td>変数 ‘key=val’</td>\n</tr>\n</tbody>\n</table>\n<h2>File を指定して実行</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -f <span class=\"token operator\">&lt;</span>file_name<span class=\"token operator\">></span></code></pre></div>\n<h2>File の中身表示</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">awk</span> <span class=\"token string\">'{print $0}'</span> <span class=\"token operator\">&lt;</span>file_name<span class=\"token operator\">></span></code></pre></div>\n<h2>File の 1 列目表示</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">awk</span> <span class=\"token string\">'{print $1}'</span> <span class=\"token operator\">&lt;</span>file_name<span class=\"token operator\">></span></code></pre></div>\n<h2>スキップ</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 3で割って1余る</span>\n<span class=\"token function\">awk</span> <span class=\"token string\">'NR%3で割って1余る==1'</span> <span class=\"token operator\">&lt;</span>file_name<span class=\"token operator\">></span></code></pre></div>\n<h2>1 列目の合計と平均</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">awk</span> <span class=\"token string\">'{sum+=$1} END {print sum,sum/NR}'</span> <span class=\"token operator\">&lt;</span>file_name<span class=\"token operator\">></span></code></pre></div>\n<h2>1 列目が 2 の行を表示</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">awk</span> <span class=\"token string\">'{if( $1 == 2 ){ print $0 }}'</span> <span class=\"token operator\">&lt;</span>file_name<span class=\"token operator\">></span></code></pre></div>\n<h2>ls コマンドを整形</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ls</span> -l <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{ print $3, $4, $9 }'</span>\n<span class=\"token comment\"># 絞り込み</span>\n<span class=\"token function\">ls</span> -l <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'$9==\"&lt;search_word>\" { print $3, $4, $9 }'</span></code></pre></div>\n<h2>引数</h2>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\"># hoge.awk\n{ print $1 * k }</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"1\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -f hoge.awk -v <span class=\"token string\">'k=2'</span>\n<span class=\"token comment\"># 2</span></code></pre></div>\n<h2>空白とカンマの両方を区切り文字</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">printf</span> <span class=\"token string\">\"a,b c\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -F <span class=\"token string\">'[, ]'</span> <span class=\"token string\">'{ print $1, $2, $3 }'</span>\n <span class=\"token comment\"># a b c</span></code></pre></div>\n<h2>Match</h2>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\"># hoge.txt\na b c\nd e f</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">awk</span> -v <span class=\"token string\">'str=e f'</span> <span class=\"token string\">'match( $0, str ){ print $0 }'</span> huga.txt\n<span class=\"token comment\"># d e f</span></code></pre></div>\n<h2>CSV 出力</h2>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\"># hoge.awk\nBEGIN { OFS = \",\" }\n\n{\n  for (i=1; i&lt;=NF; i++) {\n    printf \"\\\"%s\\\"\", $i;\n    if( i &lt; NF ) printf \"%s\",OFS\n  }\n}\n\nEND { printf \"\\n\" }</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"a b,c d\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -f hoge.awk\n<span class=\"token comment\"># \"a\",\"b,c\",\"d\"</span></code></pre></div>\n<h2>スクリプトで使用</h2>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">BEGIN {\n  while ( (getline var &lt; ファイル名) > 0 ) {\n    print var\n  }\n}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"abc\"</span> <span class=\"token operator\">></span> abc.txt\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -f hoge.awk\n<span class=\"token comment\"># abc</span></code></pre></div>\n<h2>合計・平均・分散・標準偏差を求める</h2>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">hoge.awk\n{\n  sum += $1\n  square_sum += $1 * $1\n}\n\nEND {\n  if ( NR == 0 ) exit\n\n  average  = sum / NR\n  variance = square_sum / NR - average * average\n  std_dev  = sqrt( variance )\n\n  print \"　合計　:\", sum\n  print \"　平均　:\", average\n  print \"　分散　:\", variance\n  print \"標準偏差:\", std_dev\n}</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\"># fuga,txt\n50\n60\n70\n70\n100</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">awk</span> -f hoge.awk fuga.txt\n<span class=\"token comment\"># 　合計　: 350</span>\n<span class=\"token comment\"># 　平均　: 70</span>\n<span class=\"token comment\"># 　分散　: 280</span>\n<span class=\"token comment\"># 標準偏差: 16.7332</span></code></pre></div>","frontmatter":{"title":"AWKコマンド基本","date":"February 22, 2022","post_modified":"February 22, 2022","description":"テキスト処理のコマンド 'AWK' の基本的使い方 ","tags":["Command","awk","テキスト処理"],"draft":false}},"previous":{"fields":{"slug":"/Infrastructure/docker_memo/"},"frontmatter":{"title":"Docker Memo"}},"next":{"fields":{"slug":"/Infrastructure/CICD/GitHub/act_basic/"},"frontmatter":{"title":"act 基本コマンド"}}},"pageContext":{"id":"92f3f27f-ec7a-5491-95b1-bc6752e4409b","previousPostId":"8783944e-e0cf-5b8e-9d62-ae32ff99040d","nextPostId":"10889eea-5ef5-5ac5-99e6-1c5c9ec64d0d","draft":false}},
    "staticQueryHashes": ["1126706167","1176493165","1188992244","1314910092","1760060771","2772418575"]}