{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/Infrastructure/Iac/Ansible_basic/",
    "result": {"data":{"site":{"siteMetadata":{"title":"おっさんWEBエンジニア奮闘記"}},"markdownRemark":{"id":"e9a35305-adaf-5c38-ae25-78b8c9022b2d","excerpt":"Create Role varriable の優先順位 低い順 Exec hosts/develop  は  に所属するため以下が適応される group_vars/develop.yml group_vars/ubuntu20.yml host_vars/ubuntu20.yml site.yml ansible…","html":"<h3>Create Role</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ansible-galaxy init <span class=\"token punctuation\">(</span>your_role_name<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#example</span>\nansible-galaxy init roles/nginx</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># tree</span>\ndefaults/\n  - main.yml <span class=\"token comment\">#varriable</span>\nfiles/  <span class=\"token comment\"># fileモジュールで使用するファイル格納用ディレクトリ</span>\nhandlers/\n  - main.yml <span class=\"token comment\"># restart nginx などのhandle</span>\nmeta/\n  - main.yml <span class=\"token comment\">#依存関係dependencies:[pyenv]</span>\ntasks/\n  - main.yml <span class=\"token comment\"># mainのタスクを記述</span>\ntemplates/ <span class=\"token comment\">#「template」というモジュールでファイルを転送する際に使うファイル</span>\ntests/  <span class=\"token comment\"># travisCi で使用する</span>\n  - inventory\n  - test.yml\nvars/\n  - main.yml <span class=\"token comment\">#variable</span></code></pre></div>\n<h4>varriable の優先順位 低い順</h4>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">role defaults\ninventory file or script group vars\ninventory group_vars/all\nplaybook group_vars/all\ninventory group_vars/*\nplaybook group_vars/*\ninventory file or script host vars\ninventory host_vars/*\nplaybook host_vars/*\nhost facts / cached set_facts\nplay vars\nplay vars_prompt\nplay vars_files\nrole vars (defined in role/vars/main.yml)\nblock vars (only for tasks in block)\ntask vars (only for the task)\ninclude_vars\nset_facts / registered vars\nrole (and include_role) params\ninclude params\nextra vars (always win precedence)</code></pre></div>\n<h3>Exec</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># All</span>\nansible-playbook -i hosts/develop site.yml -l vagrant_ubuntu20\n<span class=\"token comment\"># Tag</span>\nansible-playbook -i hosts/develop site.yml -l vagrant_ubuntu20 -t tag\n<span class=\"token comment\"># Skip tag</span>\nansible-playbook -i hosts/develop site.yml -l vagrant_ubuntu18 --skip-tags tag</code></pre></div>\n<h4>hosts/develop</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">[</span> develop <span class=\"token punctuation\">]</span>\n  vagrant_ubuntu20 ansible_host=127.0.0.1 ansible_connection=local ansible_python_interpreter=/usr/bin/python3\n  <span class=\"token punctuation\">[</span> ubuntu20 <span class=\"token punctuation\">]</span>\n  vagrant_ubuntu20</code></pre></div>\n<p><code class=\"language-text\">vagrant_ubuntu20</code> は<code class=\"language-text\">[develop]</code> <code class=\"language-text\">ubuntu200</code> に所属するため以下が適応される</p>\n<ul>\n<li>group_vars/develop.yml</li>\n<li>group_vars/ubuntu20.yml</li>\n<li>host_vars/ubuntu20.yml</li>\n</ul>\n<h4>site.yml</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> develop\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> develop\n\n  <span class=\"token key atrule\">roles</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> common\n      <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> common\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">role</span><span class=\"token punctuation\">:</span> ssh_config\n      <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> ssh_config</code></pre></div>\n<h3>ansible-lint</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ansible-lint site.yml\n</code></pre></div>\n<h4>.ansible.int</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">parseable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n<span class=\"token key atrule\">quiet</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n<span class=\"token key atrule\">skip_list</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> metadata\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"208\"</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"204\"</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"306\"</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"401\"</span>\n<span class=\"token key atrule\">use_default_rules</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n<span class=\"token key atrule\">verbosity</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span></code></pre></div>\n<h3>.ansible.cfg</h3>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">defaults</span><span class=\"token punctuation\">]</span></span>\n<span class=\"token key attr-name\">deprecation_warnings</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">False</span>\n<span class=\"token key attr-name\">display_skipped_hosts</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">no</span>\n<span class=\"token key attr-name\">timeout</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">300</span></code></pre></div>","frontmatter":{"title":"インフラ構成ツール Ansible の基本知識","date":"February 23, 2022","post_modified":"February 23, 2022","description":"IAS ( Infrastructure As Code )。インフラ構成をコード化して効率アップ","tags":["Ansible","IaC"],"draft":false}},"previous":{"fields":{"slug":"/Environment/Git/License/"},"frontmatter":{"title":"MIT License"}},"next":{"fields":{"slug":"/Tools/Intellij/php_cli_debug/"},"frontmatter":{"title":"Intellij IDEA で PHP-CLI の debug設定 (Docker)"}}},"pageContext":{"id":"e9a35305-adaf-5c38-ae25-78b8c9022b2d","previousPostId":"8ce8a57f-83b3-502d-96ac-d517a885ac08","nextPostId":"4ca22f48-f628-5261-869b-feca6a0cffdc","draft":false}},
    "staticQueryHashes": ["1126706167","1176493165","1188992244","1314910092","2772418575"]}