{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/BackEnd/php/laravel/vue-test/",
    "result": {"data":{"site":{"siteMetadata":{"title":"おっさんWEBエンジニア奮闘記"}},"markdownRemark":{"id":"94b9a642-8162-5881-86bf-471978221f14","excerpt":"vue.js テスト環境 - Laravel での開発の前準備 5 Vue.js Unittest を導入する vue test-utils install しかしこれではうまく動かない。 package.json を変更 再度 vue.js テストを設置 javascript のテスト用ディレクトリを作成 test…","html":"<h1>vue.js テスト環境 - Laravel での開発の前準備 5</h1>\n<h2>Vue.js Unittest を導入する</h2>\n<h3>vue test-utils install</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev @vue/test-utils mocha jsdom jsdom-global <span class=\"token function\">expect</span></code></pre></div>\n<p>しかしこれではうまく動かない。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Error: Chunk.parents: Use ChunkGroup.getParents<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> instead</code></pre></div>\n<p>package.json を変更</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> <span class=\"token string\">\"mocha-webpack\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"^2.0.0-beta.0\"</span>,</code></pre></div>\n<p>再度</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></div>\n<h2>vue.js テストを設置</h2>\n<p>javascript のテスト用ディレクトリを作成</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> tests/Javascript</code></pre></div>\n<p>test 用 setup.js 作成(公式に準ずる)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vim</span> tests/Javascript/setup.js</code></pre></div>\n<p>tests/Javascript/setup.js</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">require<span class=\"token punctuation\">(</span><span class=\"token string\">'jsdom-global'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nglobal.expect <span class=\"token operator\">=</span> require<span class=\"token punctuation\">(</span><span class=\"token string\">'expect'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>testunit を作る</h2>\n<h3>testunit (テストする方)</h3>\n<p>tests/Javascript/VueTestComponent.spec.js</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">import</span> <span class=\"token punctuation\">{</span> shallowMount <span class=\"token punctuation\">}</span> from <span class=\"token string\">'@vue/test-utils'</span>\n<span class=\"token function\">import</span> ProjectImageUploadComponent from <span class=\"token string\">'../../resources/js/components/VueTestComponent.vue'</span>\n\ndescribe<span class=\"token punctuation\">(</span><span class=\"token string\">'VueTestComponent.vue'</span>, <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  it<span class=\"token punctuation\">(</span><span class=\"token string\">'props test'</span>, <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    const wrapper <span class=\"token operator\">=</span> shallowMount<span class=\"token punctuation\">(</span>VueTestComponent<span class=\"token punctuation\">)</span>\n    const paramName <span class=\"token operator\">=</span> <span class=\"token string\">'vuetest'</span>\n    wrapper.setProps<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      TestParam: paramName\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    // eslint-disable-next-line no-undef\n    expect<span class=\"token punctuation\">(</span>wrapper.vm.<span class=\"token variable\">$props</span>.paramName<span class=\"token punctuation\">)</span>.toBe<span class=\"token punctuation\">(</span>paramName<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>vue component (テストされる方)</h3>\n<p>../../resources/js/components/VueTestComponent.vue</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> testParam: <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span>/div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token builtin class-name\">export</span> default <span class=\"token punctuation\">{</span>\n  props: <span class=\"token punctuation\">{</span>\n    testParam: <span class=\"token punctuation\">{</span>\n      type: String,\n      default: <span class=\"token string\">''</span>\n    <span class=\"token punctuation\">}</span>,\n  <span class=\"token punctuation\">}</span>,\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>/script<span class=\"token operator\">></span></code></pre></div>\n<h2>packege.json に script 登録</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run <span class=\"token builtin class-name\">test</span></code></pre></div>\n<p>で実行できるようにする</p>\n<p>package.json</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token string\">\"scripts\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">..</span>.\n        <span class=\"token punctuation\">..</span>.\n        <span class=\"token punctuation\">..</span>.\n        <span class=\"token punctuation\">..</span>.\n        <span class=\"token string\">\"test\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"mocha-webpack --webpack-config=node_modules/laravel-mix/setup/webpack.config.js --require tests/Javascript/setup.js tests/Javascript/**/*.spec.js\"</span>\n    <span class=\"token punctuation\">}</span>,</code></pre></div>\n<h2>vue unittest を実行</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token builtin class-name\">test</span></code></pre></div>\n<p>このような結果だと成功</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> WEBPACK  Compiled successfully <span class=\"token keyword\">in</span> 3370ms\n\n MOCHA  Testing<span class=\"token punctuation\">..</span>.\n\n  ProjectImageUploadComponent.vue\n    ✓ increments count when button is clicked <span class=\"token punctuation\">(</span>64ms<span class=\"token punctuation\">)</span>\n\n  <span class=\"token number\">1</span> passing <span class=\"token punctuation\">(</span>210ms<span class=\"token punctuation\">)</span>\n\n MOCHA  Tests completed successfully</code></pre></div>\n<h2>IDE から test 実行</h2>\n<p>例 Intellij idea Preferences | Languages &#x26; Frameworks | Node.js and NPM</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/938e89cc5a7e35303b32042b7f445fdd/914c7/Screen-Shot-2020-02-15-at-18.04.51.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.51898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMUlEQVQ4y7WTzW7DIBCEeY/82MZggwFjN73kkPd/rKlmYyoHJW1UqYfRmvXyzbIC5ZyHMQZN06DXGiklrJdPpLwgxIQpRORlhfcTRucwDINIa422bdF1nYhr5xxUjFEgxlhEb7DEEfN6QZxnpDkjhIjBWozjKMY1pMS+7+G9hyLsdrvher0KOKaEeVmQ1w/pbpomcSaQ4iZuJqjAuaYZaxWTRTy2sVZg+5y1FvOyfnfGPLviaGhaajkKtXe6F/YSj8ej6HA4CLTTWr5L/nQ6oTdGYqljp6q47rWfU1nXubruocNXBTVon9ufipGneBv4m94GPhvHK/0vsJ7HX6A/Auuhv5pbbS7Apmzkj1K4Pal3uirw8/ksD0AN20XuNmD74PocxHpeYj41dkVQCAE5Z3wBAR6IiogEHpkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screen Shot 2020 02 15 at 18 04 51\"\n        title=\"Screen Shot 2020 02 15 at 18 04 51\"\n        src=\"/static/938e89cc5a7e35303b32042b7f445fdd/f058b/Screen-Shot-2020-02-15-at-18.04.51.png\"\n        srcset=\"/static/938e89cc5a7e35303b32042b7f445fdd/c26ae/Screen-Shot-2020-02-15-at-18.04.51.png 158w,\n/static/938e89cc5a7e35303b32042b7f445fdd/6bdcf/Screen-Shot-2020-02-15-at-18.04.51.png 315w,\n/static/938e89cc5a7e35303b32042b7f445fdd/f058b/Screen-Shot-2020-02-15-at-18.04.51.png 630w,\n/static/938e89cc5a7e35303b32042b7f445fdd/40601/Screen-Shot-2020-02-15-at-18.04.51.png 945w,\n/static/938e89cc5a7e35303b32042b7f445fdd/914c7/Screen-Shot-2020-02-15-at-18.04.51.png 978w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>[optin]{.kbd} + [F11]{.kbd} で npm script を Popup 表示</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 564px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9ed38872d474796ec187e872ff918cdf/ba4d9/Screen-Shot-2020-02-15-at-18.06.52.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.51898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2ElEQVQ4y7WU3Q6DIAyFeRGxqAUcROKFie//Yl3aDLeZqei2ixOjtZ+nP6JG52lMiZz35EIgGwI5596EiAQAZIz5qByr65pUAEPxdiPvPVlE8s5R3/dyn6/W2k0gP38CNSkNIC44Ea2VgNZavvaqdfKmQwMgrmKMAm3bdjfpsGR4OGRg13W7iaeAuVdHboqA0j9EqqqqqMQiYOCV+aXDvwCbplmCX5c8DMPlKWctQB4Irw1POy/vFfEPobhv0zTRPM9SNrvNa1Sq/D5XKMCU0lLy+mA4IwbeAW/EiZnFprfmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screen Shot 2020 02 15 at 18 06 52\"\n        title=\"Screen Shot 2020 02 15 at 18 06 52\"\n        src=\"/static/9ed38872d474796ec187e872ff918cdf/ba4d9/Screen-Shot-2020-02-15-at-18.06.52.png\"\n        srcset=\"/static/9ed38872d474796ec187e872ff918cdf/c26ae/Screen-Shot-2020-02-15-at-18.06.52.png 158w,\n/static/9ed38872d474796ec187e872ff918cdf/6bdcf/Screen-Shot-2020-02-15-at-18.06.52.png 315w,\n/static/9ed38872d474796ec187e872ff918cdf/ba4d9/Screen-Shot-2020-02-15-at-18.06.52.png 564w\"\n        sizes=\"(max-width: 564px) 100vw, 564px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>test を選択して実行</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 572px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/52ef08e7fdb324807096a9f82924ca7c/a805e/Screen-Shot-2020-02-15-at-18.07.53.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.25316455696203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/klEQVQ4y41Ty3LTQBD0L4SqVBJLu9pdvVaK9bQl+SE7DnAAiqpcAgf4AK6k4EJBKG45cOAGBT/b1I4s80hsOLR2diX19EzPDsZVjYfrFs8uHuPB/RY69BFFMbTWCMMQURQRaB+FtO7DIBsnePf+Lb5++4zrD1dolwvMl0s0sxnaszOK62aKpEgxzC2wmEMKCSnvxiDLM7x6fYU3Hz+haVfIigKjJIFSCq7r0ioNpISQooPYjUFZFLi4vMTzly8wnc9RNQ3SPKeXtxQIuVcdKWxcjePDQ9w7OMDx0RFheHIC27YJzLbBGYPjOH/9LAhC9PGGUEc5dBSjGI9RTiakcFLXGFcVreY8zTKEWhNpXxrnEo4jfyPdEMbBiD4u6wmVvDo/JyPmbYvFaoXpYk7EfV99P4Dv+6gqC2nKtqRbQk95lJkxBsEFhONsS3Q4p71R1Jmk4HkeIUkYoojfJqQSlIATCPCAQ3mKFEglN87KO53dWbJxjUkGK7QwjC2IQCDw/E6hMULIP/EvU/wgwPXNDb58/4FHT56iKEvUsxmW6zX11YotsITBPrXhuF0CIcXusTEPM8zGzSAMoVwXnu8jDDXFtrRhCQtccWrNfxEmaUowTprR6UclL0qkaUZXT+vo17Dvu3o9oVF5OhohL0tked4lyTI6MwlMa3rCfQp/Av84nCPAP5/iAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screen Shot 2020 02 15 at 18 07 53\"\n        title=\"Screen Shot 2020 02 15 at 18 07 53\"\n        src=\"/static/52ef08e7fdb324807096a9f82924ca7c/a805e/Screen-Shot-2020-02-15-at-18.07.53.png\"\n        srcset=\"/static/52ef08e7fdb324807096a9f82924ca7c/c26ae/Screen-Shot-2020-02-15-at-18.07.53.png 158w,\n/static/52ef08e7fdb324807096a9f82924ca7c/6bdcf/Screen-Shot-2020-02-15-at-18.07.53.png 315w,\n/static/52ef08e7fdb324807096a9f82924ca7c/a805e/Screen-Shot-2020-02-15-at-18.07.53.png 572w\"\n        sizes=\"(max-width: 572px) 100vw, 572px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>test 成功</p>","frontmatter":{"title":"vue.js テスト環境 - Laravelでの開発の前準備5","date":"February 15, 2020","post_modified":"February 15, 2020","description":"Laravel上でのVue.jsにUnittestを導入。npm scriptに追加","tags":["Node","Laravel","Vue.js"],"draft":false}},"previous":{"fields":{"slug":"/BackEnd/php/laravel/phpunit/"},"frontmatter":{"title":"PHP UnitTest - Laravelでの開発の前準備4"}},"next":{"fields":{"slug":"/BackEnd/php/laravel/laravel-mix/"},"frontmatter":{"title":"webpack - Laravelでの開発の前準備6"}}},"pageContext":{"id":"94b9a642-8162-5881-86bf-471978221f14","previousPostId":"9694d7a6-7e67-5c10-9b37-1e573965a99c","nextPostId":"dbbb48b5-65e8-5d34-8277-ceb0f7206991","draft":false}},
    "staticQueryHashes": ["1126706167","1176493165","1188992244","1314910092","2772418575"]}