{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/BackEnd/php/laravel/laravel_softdelete/",
    "result": {"data":{"site":{"siteMetadata":{"title":"おっさんWEBエンジニア奮闘記"}},"markdownRemark":{"id":"5f074ed3-0817-5274-91dc-556a5012b68d","excerpt":"Laravel Softdelete model に追加 Softdelete されているか Softdelete されているデータも含めて取得 Softdelete されているデータのみ取得 Softdelete を復元 物理削除","html":"<h1>Laravel Softdelete</h1>\n<h2>model に追加</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>Model</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>SoftDeletes</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">SoftDeletes</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Softdelete されているか</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token function\">trashed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// softdelete されている</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Softdelete されているデータも含めて取得</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name class-name-fully-qualified static-context\">App<span class=\"token punctuation\">\\</span>User</span><span class=\"token operator\">::</span><span class=\"token function\">withTrashed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Softdelete されているデータのみ取得</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name class-name-fully-qualified static-context\">App<span class=\"token punctuation\">\\</span>User</span><span class=\"token operator\">::</span><span class=\"token function\">onlyTrashed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Softdelete を復元</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token function\">restore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>物理削除</h2>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token function\">forceDelete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Laravel Softdelete","date":"December 15, 2020","post_modified":"December 15, 2020","description":"Laravel softdeleteの振る舞い","tags":["PHP","Laravel"],"draft":false}},"previous":{"fields":{"slug":"/BackEnd/php/laravel/laravel_seeder_facker/"},"frontmatter":{"title":"Laravel migration seed facker"}},"next":{"fields":{"slug":"/BackEnd/php/laravel/laravel_varidation/"},"frontmatter":{"title":"Laravel Varidation"}}},"pageContext":{"id":"5f074ed3-0817-5274-91dc-556a5012b68d","previousPostId":"a0b150ff-eff6-5a0a-b46c-8f1d6a725fcf","nextPostId":"c6f7c41b-eabc-5bf9-87c9-d447cf8a7d43","draft":false}},
    "staticQueryHashes": ["1126706167","1176493165","1188992244","1314910092","2772418575"]}