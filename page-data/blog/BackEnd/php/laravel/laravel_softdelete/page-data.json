{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/BackEnd/php/laravel/laravel_softdelete/",
    "result": {"data":{"site":{"siteMetadata":{"title":"おっさんWEBエンジニア奮闘記"}},"markdownRemark":{"id":"90cfe1d4-9d89-5cb5-bd11-1500e1b208d1","excerpt":"Laravel Softdelete model に追加 Softdelete されているか Softdelete されているデータも含めて取得 Softdelete されているデータのみ取得 Softdelete を復元 物理削除","html":"<h2>Laravel Softdelete</h2>\n<h3>model に追加</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>Model</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>Eloquent<span class=\"token punctuation\">\\</span>SoftDeletes</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">User</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">use</span> <span class=\"token package\">SoftDeletes</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Softdelete されているか</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token function\">trashed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// softdelete されている</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Softdelete されているデータも含めて取得</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name class-name-fully-qualified static-context\">App<span class=\"token punctuation\">\\</span>User</span><span class=\"token operator\">::</span><span class=\"token function\">withTrashed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Softdelete されているデータのみ取得</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$users</span> <span class=\"token operator\">=</span> <span class=\"token class-name class-name-fully-qualified static-context\">App<span class=\"token punctuation\">\\</span>User</span><span class=\"token operator\">::</span><span class=\"token function\">onlyTrashed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Softdelete を復元</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token function\">restore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>物理削除</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token function\">forceDelete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Laravel Softdelete","date":"December 15, 2020","post_modified":"December 15, 2020","description":"Laravel softdeleteの振る舞い","tags":["PHP","Laravel"],"draft":false}},"previous":{"fields":{"slug":"/BackEnd/php/laravel/laravel_seeder_facker/"},"frontmatter":{"title":"Laravel migration seed facker"}},"next":{"fields":{"slug":"/BackEnd/php/laravel/laravel_varidation/"},"frontmatter":{"title":"Laravel Varidation"}}},"pageContext":{"id":"90cfe1d4-9d89-5cb5-bd11-1500e1b208d1","previousPostId":"a1f0c530-2d7e-5558-afc7-a90b5d5025fc","nextPostId":"b275491b-11c9-5648-a111-95ffeb00d3d9","draft":false}},
    "staticQueryHashes": ["1126706167","1176493165","1188992244","1314910092","1760060771","2772418575","3679674316"]}