{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blog/BackEnd/php/laravel/laravel_login_feature/",
    "result": {"data":{"site":{"siteMetadata":{"title":"おっさんWEBエンジニア奮闘記"}},"markdownRemark":{"id":"bbf2a11b-5741-5566-92c8-efa443a9e8f3","excerpt":"Laravel login 機能追加 Setup Create Model Dir Create Controller Dir Create Model and table Copy Auth Copy HomeController Views Add admin-routing Admin Login App…","html":"<h1>Laravel login 機能追加</h1>\n<h2>Setup</h2>\n<h3>Create Model Dir</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p App/Models/Admin</code></pre></div>\n<h3>Create Controller Dir</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p App/Http/Controllers/</code></pre></div>\n<h3>Create Model and table</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">php artisan make:model Models/Admin/Admin -m</code></pre></div>\n<h3>Copy Auth</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> -rf App/Http/Controllers/auth App/Http/Controllers/Admin/auth</code></pre></div>\n<h3>Copy HomeController</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> App/Http/Controllers/HomeController.php App/Http/Controllers/Admin/HomeController.php</code></pre></div>\n<h3>Views</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> /resources/views/home.blade.php /resources/views/admin/home.blade.php\n<span class=\"token function\">cp</span> /resources/views/auth/login.blade.php /resources/views/admin/auth/login.blade.php</code></pre></div>\n<h3>Add admin-routing</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">touch</span> /routes/admin.php</code></pre></div>\n<h2>Admin Login</h2>\n<h3>App/Models/Admin/Admin.php</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Table固有設定追記</span>\n    const CREATED_AT <span class=\"token operator\">=</span> <span class=\"token string\">'reg_date'</span><span class=\"token punctuation\">;</span>\n    const UPDATED_AT <span class=\"token operator\">=</span> <span class=\"token string\">'upd_date'</span><span class=\"token punctuation\">;</span>\n    protected <span class=\"token variable\">$table</span> <span class=\"token operator\">=</span> <span class=\"token string\">'admin'</span><span class=\"token punctuation\">;</span>\n    protected <span class=\"token variable\">$primaryKey</span> <span class=\"token operator\">=</span> <span class=\"token string\">'admin_id'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token comment\"># Password カラム指定</span>\n    public <span class=\"token keyword\">function</span> <span class=\"token function-name function\">getAuthPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin class-name\">return</span> <span class=\"token variable\">$this</span>-<span class=\"token operator\">></span>pass<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<h3>App/Http/Controllers/Admin/HomeController.php</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#middlewear auth.admin に設定</span>\n<span class=\"token variable\">$this</span>-<span class=\"token operator\">></span>middleware<span class=\"token punctuation\">(</span><span class=\"token string\">'auth:admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>App/Http/Controllers/Admin/Auth/LoginController.php</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Redirect URL when login success</span>\nprotected <span class=\"token variable\">$redirectTo</span> <span class=\"token operator\">=</span> <span class=\"token string\">'/admin/home'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token comment\"># Add middlewear admin</span>\npublic <span class=\"token keyword\">function</span> <span class=\"token function-name function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span>-<span class=\"token operator\">></span>middleware<span class=\"token punctuation\">(</span><span class=\"token string\">'guest:admin'</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span>except<span class=\"token punctuation\">(</span><span class=\"token string\">'logout'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> //変更\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token comment\"># 管理者認証のguardを指定</span>\n    protected <span class=\"token keyword\">function</span> <span class=\"token function-name function\">guard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin class-name\">return</span> <span class=\"token punctuation\">\\</span>Auth::guard<span class=\"token punctuation\">(</span><span class=\"token string\">'admin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token comment\"># View login-form</span>\npublic <span class=\"token keyword\">function</span> <span class=\"token function-name function\">showLoginForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin class-name\">return</span> view<span class=\"token punctuation\">(</span><span class=\"token string\">'admin.login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  //変更\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token comment\"># Login logic</span>\n    public <span class=\"token keyword\">function</span> login<span class=\"token punctuation\">(</span>Request <span class=\"token variable\">$request</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        // Validate the form data\n        <span class=\"token variable\">$this</span>-<span class=\"token operator\">></span>validate<span class=\"token punctuation\">(</span><span class=\"token variable\">$request</span>, <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">'email'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'required|email'</span>,\n            <span class=\"token string\">'password'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'required|min:3'</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        // Attempt to log the user <span class=\"token keyword\">in</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Auth::guard<span class=\"token punctuation\">(</span><span class=\"token string\">'admin'</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span>attempt<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'email'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$request</span>-<span class=\"token operator\">></span>email, <span class=\"token string\">'password'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$request</span>-<span class=\"token operator\">></span>password<span class=\"token punctuation\">]</span>, <span class=\"token variable\">$request</span>-<span class=\"token operator\">></span>remember<span class=\"token punctuation\">))</span> <span class=\"token punctuation\">{</span>\n            // <span class=\"token keyword\">if</span> successful, <span class=\"token keyword\">then</span> redirect to their intended location\n            <span class=\"token builtin class-name\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span>intended<span class=\"token punctuation\">(</span>route<span class=\"token punctuation\">(</span><span class=\"token string\">'admin.home'</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        // <span class=\"token keyword\">if</span> unsuccessful, <span class=\"token keyword\">then</span> redirect back to the login with the form data\n        <span class=\"token builtin class-name\">return</span> redirect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span>back<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>-<span class=\"token operator\">></span>withInput<span class=\"token punctuation\">(</span><span class=\"token variable\">$request</span>-<span class=\"token operator\">></span>only<span class=\"token punctuation\">(</span><span class=\"token string\">'email'</span>, <span class=\"token string\">'remember'</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token comment\"># Login-key column name</span>\n    public <span class=\"token keyword\">function</span> username<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> // このメソッドを追記\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin class-name\">return</span> <span class=\"token string\">'email'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<h3>config/auth.php</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">    <span class=\"token string\">'defaults'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n      - <span class=\"token string\">'guard'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'web'</span>,\n      + <span class=\"token string\">'guard'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'user'</span>,\n        <span class=\"token string\">'passwords'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'users'</span>,\n    <span class=\"token punctuation\">]</span>,\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n\n    <span class=\"token string\">'guards'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'web'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'session'</span>,\n            <span class=\"token string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'users'</span>,\n        <span class=\"token punctuation\">]</span>,\n        <span class=\"token string\">'user'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'session'</span>,\n            <span class=\"token string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'users'</span>,\n        <span class=\"token punctuation\">]</span>,\n\n        <span class=\"token string\">'api'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'token'</span>,\n            <span class=\"token string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'users'</span>,\n            <span class=\"token string\">'hash'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> false,\n        <span class=\"token punctuation\">]</span>,\n    +   <span class=\"token string\">'admin'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    +       <span class=\"token string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'session'</span>,\n    +       <span class=\"token string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'admins'</span>,\n    +   <span class=\"token punctuation\">]</span>,\n    <span class=\"token punctuation\">]</span>,\n\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n\n    <span class=\"token string\">'providers'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'users'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'eloquent'</span>,\n            <span class=\"token string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App<span class=\"token punctuation\">\\</span>User::class,\n        <span class=\"token punctuation\">]</span>,\n    +    <span class=\"token string\">'admins'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    +        <span class=\"token string\">'driver'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'eloquent'</span>,\n    +        <span class=\"token string\">'model'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> App<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Admin<span class=\"token punctuation\">\\</span>Admin::class,\n    +    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n<span class=\"token punctuation\">..</span>.\n\n    <span class=\"token string\">'passwords'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'users'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'users'</span>,\n            <span class=\"token string\">'table'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'password_resets'</span>,\n            <span class=\"token string\">'expire'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">60</span>,\n            <span class=\"token string\">'throttle'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">60</span>,\n        <span class=\"token punctuation\">]</span>,\n    +    <span class=\"token string\">'admins'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n    +        <span class=\"token string\">'provider'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'admins'</span>,\n    +        <span class=\"token string\">'table'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token string\">'password_resets'</span>,\n    +        <span class=\"token string\">'expire'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">15</span>\n    +    <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span>,</code></pre></div>\n<h3>app/Exceptions/Handler.php</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">//追記\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n    <span class=\"token comment\">/**\n     * Convert an authentication exception into an unauthenticated response.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  \\Illuminate\\Auth\\AuthenticationException  $exception\n     * @return \\Illuminate\\Http\\Response\n     */</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">unauthenticated</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$request</span><span class=\"token punctuation\">,</span> <span class=\"token class-name type-declaration\">AuthenticationException</span> <span class=\"token variable\">$exception</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$request</span><span class=\"token operator\">-></span><span class=\"token function\">expectsJson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token function\">response</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'error'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Unauthenticated.'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">401</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'admin'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$exception</span><span class=\"token operator\">-></span><span class=\"token function\">guards</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">guest</span><span class=\"token punctuation\">(</span><span class=\"token function\">route</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'admin.login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">guest</span><span class=\"token punctuation\">(</span><span class=\"token function\">route</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></span></code></pre></div>\n<h2>Admin Faker</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">php artisan make:factory AdminFactory</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// database/seeds/AdminsTableSeeder.php</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//</span>\n        <span class=\"token class-name static-context\">DB</span><span class=\"token operator\">::</span><span class=\"token function\">table</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'admins'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'1'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'admin@sports-funding.com'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'password'</span> <span class=\"token operator\">=></span> <span class=\"token class-name static-context\">Hash</span><span class=\"token operator\">::</span><span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'管理者てすと'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'name_kana'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'かんりしゃてすと'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'company_name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'株式会社テスト'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'created_at'</span> <span class=\"token operator\">=></span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'deleted_at'</span> <span class=\"token operator\">=></span> <span class=\"token constant\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'2'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'admin2@sports-funding.com'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'password'</span> <span class=\"token operator\">=></span> <span class=\"token class-name static-context\">Hash</span><span class=\"token operator\">::</span><span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'山田太郎'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'name_kana'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'やまだたろう'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'company_name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'株式会社山田'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'created_at'</span> <span class=\"token operator\">=></span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string single-quoted-string\">'deleted_at'</span> <span class=\"token operator\">=></span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token function\">factory</span><span class=\"token punctuation\">(</span><span class=\"token class-name class-name-fully-qualified static-context\">App<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Admin<span class=\"token punctuation\">\\</span>Admin</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// database/factories/AdminFactory.php</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Models<span class=\"token punctuation\">\\</span>Admin<span class=\"token punctuation\">\\</span>Admin</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Illuminate<span class=\"token punctuation\">\\</span>Support<span class=\"token punctuation\">\\</span>Facades<span class=\"token punctuation\">\\</span>Hash</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Faker<span class=\"token punctuation\">\\</span>Generator</span> <span class=\"token keyword\">as</span> Faker<span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$factory</span><span class=\"token operator\">-></span><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token class-name static-context\">Admin</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">Faker</span> <span class=\"token variable\">$faker</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string single-quoted-string\">'email'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$faker</span><span class=\"token operator\">-></span><span class=\"token property\">email</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string single-quoted-string\">'password'</span> <span class=\"token operator\">=></span> <span class=\"token class-name static-context\">Hash</span><span class=\"token operator\">::</span><span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'name'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$faker</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'name_kana'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$faker</span><span class=\"token operator\">-></span><span class=\"token property\">kanaName</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string single-quoted-string\">'company_name'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$faker</span><span class=\"token operator\">-></span><span class=\"token property\">company</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Laravel login機能追加","date":"December 15, 2020","post_modified":"December 15, 2020","description":"Laravelにログイン機能追加の一例","tags":["PHP","Laravel"],"draft":false}},"previous":{"fields":{"slug":"/BackEnd/php/laravel/laravel_fillable_gurd/"},"frontmatter":{"title":"Laravel Filable or Gurd"}},"next":{"fields":{"slug":"/BackEnd/php/laravel/laravel_seeder_facker/"},"frontmatter":{"title":"Laravel migration seed facker"}}},"pageContext":{"id":"bbf2a11b-5741-5566-92c8-efa443a9e8f3","previousPostId":"5e90c147-5e2c-56d6-8867-a9800f270c9b","nextPostId":"a0b150ff-eff6-5a0a-b46c-8f1d6a725fcf","draft":false}},
    "staticQueryHashes": ["1126706167","1176493165","1188992244","1314910092","2772418575"]}